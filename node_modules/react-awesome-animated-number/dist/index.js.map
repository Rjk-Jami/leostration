{"version":3,"file":"index.js","sources":["../src/AnimatedNumberItem.tsx","../src/AnimatedNumber.tsx"],"sourcesContent":["import { CSSProperties, useEffect, useRef, useState } from \"react\";\nimport \"./AnimatedNumberItem.scss\";\n\nexport interface AnimatedNumberItemProps {\n  number: number;\n  size: number;\n  duration?: number;\n  order?: \"asc\" | \"desc\";\n}\n\nconst AnimatedNumberItem: React.FC<AnimatedNumberItemProps> = ({\n  number,\n  size,\n  duration = 200,\n  order = \"asc\",\n}) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [transformStyle, setTransformStyle] = useState<CSSProperties>({});\n\n  const numberWrapperRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    setCurrentIndex(number);\n  }, [number]);\n\n  useEffect(() => {\n    const $numberWrapper = numberWrapperRef.current;\n    if ($numberWrapper) {\n      requestAnimationFrame(() => {\n        setTransformStyle({\n          transform: `translateY(${\n            size * (order === \"desc\" ? 9 - currentIndex : currentIndex) * -1\n          }px)`,\n        });\n      });\n    }\n  }, [currentIndex, size, order]);\n\n  return (\n    <div className=\"AnimatedNumberItem\" style={{ height: size }}>\n      <div\n        ref={numberWrapperRef}\n        className=\"AnimatedNumberItem__wrapper\"\n        style={{ transitionDuration: `${duration}ms`, ...transformStyle }}\n      >\n        {Array.from({ length: 10 }).map((_, number) => (\n          <div\n            key={number}\n            className=\"AnimatedNumberItem__number\"\n            style={{\n              fontSize: size,\n              height: size,\n            }}\n          >\n            {order === \"desc\" ? 9 - number : number}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default AnimatedNumberItem;\n","import { Fragment, useMemo } from \"react\";\nimport AnimatedNumberItem from \"./AnimatedNumberItem\";\nimport \"./AnimatedNumber.scss\";\n\nexport interface AnimatedNumberProps\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n  value: number;\n  size?: number;\n  hasComma?: boolean;\n  duration?: number;\n  order?: \"asc\" | \"desc\";\n  minDigits?: number;\n}\n\nconst AnimatedNumber = ({\n  value,\n  size = 14,\n  hasComma = false,\n  duration = 200,\n  style,\n  className,\n  order = \"asc\",\n  minDigits,\n  ...restProps\n}: AnimatedNumberProps) => {\n  const numberArray = useMemo(() => {\n    const reversedNumberArray = String(value).split(\"\").reverse();\n    if (typeof minDigits === \"number\" && reversedNumberArray.length < minDigits) {\n      const lackOfDigits = minDigits - reversedNumberArray.length;\n      Array.from({ length: lackOfDigits }).forEach(() => {\n        reversedNumberArray.push(\"0\");\n      });\n    }\n    return reversedNumberArray;\n  }, [value, minDigits]);\n\n  const isMinus = useMemo(() => {\n    return numberArray[numberArray.length - 1] === \"-\";\n  }, [numberArray]);\n\n  const decimalPointIndex = useMemo(() => {\n    return numberArray.findIndex((value) => value === \".\");\n  }, [numberArray]);\n\n  const decimalLength = useMemo(() => {\n    return decimalPointIndex > -1 ? decimalPointIndex : 0;\n  }, [numberArray, decimalPointIndex]);\n\n  return (\n    <div\n      className={\n        className\n          ? `ReactAwesomeAnimatedNumber ${className}`\n          : \"ReactAwesomeAnimatedNumber\"\n      }\n      style={{ ...style, height: size }}\n      {...restProps}\n    >\n      {numberArray.map((number, index) => {\n        const isInt = decimalLength ? index > decimalPointIndex : true;\n        const intIndex = decimalLength ? index - decimalLength - 1 : index;\n        const isCommaNeeded =\n          hasComma &&\n          isInt &&\n          intIndex % 3 === 0 &&\n          intIndex !== 0 &&\n          (isMinus ? index !== numberArray.length - 1 : true);\n\n        return (\n          <Fragment key={index}>\n            {isCommaNeeded && (\n              <div\n                className=\"ReactAwesomeAnimatedNumber__text\"\n                style={{\n                  fontSize: size,\n                  height: size,\n                }}\n              >\n                ,\n              </div>\n            )}\n            {isNaN(Number(number)) ? (\n              <div\n                className=\"ReactAwesomeAnimatedNumber__text\"\n                style={{\n                  fontSize: size,\n                  height: size,\n                }}\n              >\n                {number}\n              </div>\n            ) : (\n              <AnimatedNumberItem\n                number={Number(number)}\n                size={size}\n                duration={duration}\n                order={order}\n              />\n            )}\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AnimatedNumber;\n"],"names":["AnimatedNumberItem","number","size","duration","order","useState","currentIndex","setCurrentIndex","transformStyle","setTransformStyle","numberWrapperRef","useRef","useEffect","$numberWrapper","current","requestAnimationFrame","transform","_jsx","height","transitionDuration","Array","from","length","map","_","fontSize","AnimatedNumber","value","hasComma","style","className","minDigits","restProps","numberArray","useMemo","reversedNumberArray","String","split","reverse","lackOfDigits","forEach","push","isMinus","decimalPointIndex","findIndex","decimalLength","index","isInt","intIndex","isCommaNeeded","_jsxs","Fragment","isNaN","Number"],"mappings":"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"}